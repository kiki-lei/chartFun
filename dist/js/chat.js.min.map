{"version":3,"sources":["chat.js"],"names":["showMsg","str","type","div","document","createElement","innerHTML","style","color","getElementById","appendChild","websocket","WebSocket","onopen","onkeydown","event","window","keyCode","which","display","nickname","value","console","log","send","onclick","txt","onclose","onmessage","e","data","msg","JSON","parse"],"mappings":"AAAA,aAKA,SAASA,QAAQC,EAAKC,GAClB,IAAIC,EAAMC,SAASC,cAAc,OACjCF,EAAIG,UAAYL,EACJ,SAARC,EACAC,EAAII,MAAMC,MAAQ,OACH,SAARN,IACPC,EAAII,MAAMC,MAAQ,QAEtBJ,SAASK,eAAe,WAAWC,YAAYP,GAXnD,IAAIQ,UAAY,IAAIC,UAAU,sBAkB9BD,UAAUE,OAAS,SAAUZ,GAKPG,SAASK,eAAe,YAC9BK,UAAY,SAAUC,GAG9B,GAAc,KAFDC,OAAOD,MAAQA,EAAME,QAAUF,EAAMG,OAEhC,CAEdd,SAASK,eAAe,YAAYF,MAAMY,QAAU,OACpD,IAAIC,EAAWhB,SAASK,eAAe,YAAYY,MAC/CD,IAKAE,QAAQC,IAAIH,GACZT,UAAUa,KAAKJ,MAOVhB,SAASK,eAAe,WAC9BgB,QAAU,WACjB,IAAIC,EAAMtB,SAASK,eAAe,WAAWY,MACzCK,IACAf,UAAUa,KAAKE,GACftB,SAASK,eAAe,WAAWY,MAAQ,KAKrCjB,SAASK,eAAe,WAC9BK,UAAY,SAAUC,GAG1B,GAAc,KAFDC,OAAOD,MAAQA,EAAME,QAAUF,EAAMG,OAEhC,CACd,IAAIQ,EAAMtB,SAASK,eAAe,WAAWY,MACzCK,IACAf,UAAUa,KAAKE,GAEftB,SAASK,eAAe,WAAWY,MAAQ,OAO3DV,UAAUgB,QAAU,WAChBL,QAAQC,IAAI,uBAIhBZ,UAAUiB,UAAY,SAAUC,GAC5BP,QAAQC,IAAIM,EAAEC,MACd,IAAIC,EAAMC,KAAKC,MAAMJ,EAAEC,MACvB9B,QAAQ+B,EAAID,KAAMC,EAAI7B","file":"chat.js","sourcesContent":["\"use strict\";\n\nvar websocket = new WebSocket(\"ws:/localhost:3001\");\n\n//显示信息\nfunction showMsg(str, type) {\n    var div = document.createElement('div');\n    div.innerHTML = str;\n    if (type == \"enter\") {\n        div.style.color = \"blue\";\n    } else if (type == \"leave\") {\n        div.style.color = \"pink\";\n    }\n    document.getElementById(\"infoBox\").appendChild(div);\n}\n\n/*\r\n * 打开聊天室时，欢迎句\r\n * input不为空的时候发送消息\r\n */\nwebsocket.onopen = function (str) {\n    // console.log(\"Websocket onopen!\");\n\n\n    // 设置昵称\n    var setNickname = document.getElementById(\"nickname\");\n    setNickname.onkeydown = function (event) {\n        var keyNum = window.event ? event.keyCode : event.which; //获取被按下的键值\n        //判断如果用户按下了回车键（keycody=13）\n        if (keyNum == 13) {\n            // 隐藏设置昵称对话框\n            document.getElementById(\"loginBox\").style.display = \"none\";\n            var nickname = document.getElementById(\"nickname\").value;\n            if (nickname) {\n                // var nickname = {};\n                // nickname.type = \"nickname\";\n                // nickname.txt = document.getElementById(\"nickname\").value;\n\n                console.log(nickname);\n                websocket.send(nickname);\n                //txt = \"\";  //失败\n            }\n        }\n    };\n\n    // 点击发送按钮发送消息\n    var sendButton = document.getElementById(\"sendBtn\");\n    sendButton.onclick = function () {\n        var txt = document.getElementById(\"sendTxt\").value;\n        if (txt) {\n            websocket.send(txt);\n            document.getElementById(\"sendTxt\").value = \"\";\n        }\n    };\n\n    // 回车键发送消息\n    var sendTxt = document.getElementById(\"sendTxt\");\n    sendTxt.onkeydown = function (event) {\n        var keyNum = window.event ? event.keyCode : event.which; //获取被按下的键值\n        //判断如果用户按下了回车键（keycody=13）\n        if (keyNum == 13) {\n            var txt = document.getElementById(\"sendTxt\").value;\n            if (txt) {\n                websocket.send(txt);\n                //txt = \"\";  //失败\n                document.getElementById(\"sendTxt\").value = \"\";\n            }\n        }\n    };\n};\n\n// 关闭聊天室\nwebsocket.onclose = function () {\n    console.log(\"Websocket onclose!\");\n};\n\n// 接收消息\nwebsocket.onmessage = function (e) {\n    console.log(e.data);\n    var msg = JSON.parse(e.data);\n    showMsg(msg.data, msg.type);\n};"]}